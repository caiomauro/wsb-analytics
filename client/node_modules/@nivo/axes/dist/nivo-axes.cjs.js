"use strict";var e=require("react"),t=require("@nivo/core"),n=require("@react-spring/web"),i=require("d3-time-format"),r=require("d3-format"),a=require("@nivo/scales"),o=require("react/jsx-runtime"),s=require("prop-types");function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var c=l(e);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}var x=function(e){var n,i=e.axis,r=e.scale,o=e.ticksPosition,s=e.tickValues,l=e.tickSize,c=e.tickPadding,x=e.tickRotation,d=e.truncateTickAt,f=e.engine,m=void 0===f?"svg":f,g=a.getScaleTicks(r,s),y=t.textPropsByEngine[m],h="bandwidth"in r?a.centerScale(r):r,k={lineX:0,lineY:0},v={textX:0,textY:0},p="object"==typeof document&&"rtl"===document.dir,b=y.align.center,T=y.baseline.center;"x"===i?(n=function(e){var t;return{x:null!=(t=h(e))?t:0,y:0}},k.lineY=l*("after"===o?1:-1),v.textY=(l+c)*("after"===o?1:-1),T="after"===o?y.baseline.top:y.baseline.bottom,0===x?b=y.align.center:"after"===o&&x<0||"before"===o&&x>0?(b=y.align[p?"left":"right"],T=y.baseline.center):("after"===o&&x>0||"before"===o&&x<0)&&(b=y.align[p?"right":"left"],T=y.baseline.center)):(n=function(e){var t;return{x:0,y:null!=(t=h(e))?t:0}},k.lineX=l*("after"===o?1:-1),v.textX=(l+c)*("after"===o?1:-1),b="after"===o?y.align.left:y.align.right);return{ticks:g.map((function(e){var t="string"==typeof e?function(e){var t=String(e).length;return d&&d>0&&t>d?""+String(e).slice(0,d).concat("..."):""+e}(e):e;return u({key:e instanceof Date?""+e.valueOf():""+e,value:t},n(e),k,v)})),textAlign:b,textBaseline:T}},d=function(e,t){if(void 0===e||"function"==typeof e)return e;if("time"===t.type){var n=i.timeFormat(e);return function(e){return n(e instanceof Date?e:new Date(e))}}return r.format(e)},f=function(e){var t,n=e.width,i=e.height,r=e.scale,o=e.axis,s=e.values,l=(t=s,Array.isArray(t)?s:void 0)||a.getScaleTicks(r,s),c="bandwidth"in r?a.centerScale(r):r,u="x"===o?l.map((function(e){var t,n;return{key:e instanceof Date?""+e.valueOf():""+e,x1:null!=(t=c(e))?t:0,x2:null!=(n=c(e))?n:0,y1:0,y2:i}})):l.map((function(e){var t,i;return{key:e instanceof Date?""+e.valueOf():""+e,x1:0,x2:n,y1:null!=(t=c(e))?t:0,y2:null!=(i=c(e))?i:0}}));return u},m=e.memo((function(i){var r,a=i.value,s=i.format,l=i.lineX,c=i.lineY,x=i.onClick,d=i.textBaseline,f=i.textAnchor,m=i.animatedProps,g=t.useTheme(),y=g.axis.ticks.line,h=g.axis.ticks.text,k=null!=(r=null==s?void 0:s(a))?r:a,v=e.useMemo((function(){var e={opacity:m.opacity};return x?{style:u({},e,{cursor:"pointer"}),onClick:function(e){return x(e,k)}}:{style:e}}),[m.opacity,x,k]);return o.jsxs(n.animated.g,u({transform:m.transform},v,{children:[o.jsx("line",{x1:0,x2:l,y1:0,y2:c,style:y}),h.outlineWidth>0&&o.jsx(n.animated.text,{dominantBaseline:d,textAnchor:f,transform:m.textTransform,style:h,strokeWidth:2*h.outlineWidth,stroke:h.outlineColor,strokeLinejoin:"round",children:""+k}),o.jsx(n.animated.text,{dominantBaseline:d,textAnchor:f,transform:m.textTransform,style:h,children:""+k})]}))})),g=function(i){var r=i.axis,a=i.scale,s=i.x,l=void 0===s?0:s,f=i.y,g=void 0===f?0:f,y=i.length,h=i.ticksPosition,k=i.tickValues,v=i.tickSize,p=void 0===v?5:v,b=i.tickPadding,T=void 0===b?5:b,P=i.tickRotation,j=void 0===P?0:P,S=i.format,A=i.renderTick,O=void 0===A?m:A,W=i.truncateTickAt,C=i.legend,w=i.legendPosition,B=void 0===w?"end":w,X=i.legendOffset,Y=void 0===X?0:X,q=i.onClick,z=i.ariaHidden,R=t.useTheme(),V=R.axis.legend.text,D=e.useMemo((function(){return d(S,a)}),[S,a]),E=x({axis:r,scale:a,ticksPosition:h,tickValues:k,tickSize:p,tickPadding:T,tickRotation:j,truncateTickAt:W}),M=E.ticks,F=E.textAlign,L=E.textBaseline,G=null;if(void 0!==C){var N,H=0,I=0,J=0;"y"===r?(J=-90,H=Y,"start"===B?(N="start",I=y):"middle"===B?(N="middle",I=y/2):"end"===B&&(N="end")):(I=Y,"start"===B?N="start":"middle"===B?(N="middle",H=y/2):"end"===B&&(N="end",H=y)),G=o.jsxs(o.Fragment,{children:[V.outlineWidth>0&&o.jsx("text",{transform:"translate("+H+", "+I+") rotate("+J+")",textAnchor:N,style:u({dominantBaseline:"central"},V),strokeWidth:2*V.outlineWidth,stroke:V.outlineColor,strokeLinejoin:"round",children:C}),o.jsx("text",{transform:"translate("+H+", "+I+") rotate("+J+")",textAnchor:N,style:u({dominantBaseline:"central"},V),children:C})]})}var K=t.useMotionConfig(),Q=K.animate,U=K.config,Z=n.useSpring({transform:"translate("+l+","+g+")",lineX2:"x"===r?y:0,lineY2:"x"===r?0:y,config:U,immediate:!Q}),$=e.useCallback((function(e){return{opacity:1,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+j+")"}}),[j]),_=e.useCallback((function(e){return{opacity:0,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+j+")"}}),[j]),ee=n.useTransition(M,{keys:function(e){return e.key},initial:$,from:_,enter:$,update:$,leave:{opacity:0},config:U,immediate:!Q});return o.jsxs(n.animated.g,{transform:Z.transform,"aria-hidden":z,children:[ee((function(e,t,n,i){return c.createElement(O,u({tickIndex:i,format:D,rotate:j,textBaseline:L,textAnchor:F,truncateTickAt:W,animatedProps:e},t,q?{onClick:q}:{}))})),o.jsx(n.animated.line,{style:R.axis.domain.line,x1:0,x2:Z.lineX2,y1:0,y2:Z.lineY2}),G]})},y=e.memo(g),h={ticksPosition:s.oneOf(["before","after"]),tickValues:s.oneOfType([s.number,s.arrayOf(s.oneOfType([s.number,s.string,s.instanceOf(Date)])),s.string]),rotateOnTickLength:s.shape({angle:s.number,length:s.number}),tickSize:s.number,tickPadding:s.number,tickRotation:s.number,format:s.oneOfType([s.func,s.string]),renderTick:s.func,legend:s.node,legendPosition:s.oneOf(["start","middle","end"]),legendOffset:s.number,ariaHidden:s.bool},k=s.shape(h),v=["top","right","bottom","left"],p=e.memo((function(e){var t=e.xScale,n=e.yScale,i=e.width,r=e.height,a={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return o.jsx(o.Fragment,{children:v.map((function(e){var s=a[e];if(!s)return null;var l="top"===e||"bottom"===e,c="top"===e||"left"===e?"before":"after";return o.jsx(y,u({},s,{axis:l?"x":"y",x:"right"===e?i:0,y:"bottom"===e?r:0,scale:l?t:n,length:l?i:r,ticksPosition:c,truncateTickAt:s.truncateTickAt}),e)}))})})),b=e.memo((function(e){var i=e.animatedProps,r=t.useTheme();return o.jsx(n.animated.line,u({},i,r.grid.line))})),T=e.memo((function(i){var r=i.lines,a=t.useMotionConfig(),s=a.animate,l=a.config,c=n.useTransition(r,{keys:function(e){return e.key},initial:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},from:function(e){return{opacity:0,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},enter:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},update:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},leave:{opacity:0},config:l,immediate:!s});return o.jsx("g",{children:c((function(t,n){return e.createElement(b,u({},n,{key:n.key,animatedProps:t}))}))})})),P=e.memo((function(t){var n=t.width,i=t.height,r=t.xScale,a=t.yScale,s=t.xValues,l=t.yValues,c=e.useMemo((function(){return!!r&&f({width:n,height:i,scale:r,axis:"x",values:s})}),[r,s,n,i]),u=e.useMemo((function(){return!!a&&f({width:n,height:i,scale:a,axis:"y",values:l})}),[i,n,a,l]);return o.jsxs(o.Fragment,{children:[c&&o.jsx(T,{lines:c}),u&&o.jsx(T,{lines:u})]})})),j=function(e,n){var i,r=n.axis,a=n.scale,o=n.x,s=void 0===o?0:o,l=n.y,c=void 0===l?0:l,u=n.length,d=n.ticksPosition,f=n.tickValues,m=n.tickSize,g=void 0===m?5:m,y=n.tickPadding,h=void 0===y?5:y,k=n.tickRotation,v=void 0===k?0:k,p=n.format,b=n.legend,T=n.legendPosition,P=void 0===T?"end":T,j=n.legendOffset,S=void 0===j?0:j,A=n.theme,O=x({axis:r,scale:a,ticksPosition:d,tickValues:f,tickSize:g,tickPadding:h,tickRotation:v,engine:"canvas"}),W=O.ticks,C=O.textAlign,w=O.textBaseline;e.save(),e.translate(s,c),e.textAlign=C,e.textBaseline=w;var B=A.axis.ticks.text;e.font=(B.fontWeight?B.fontWeight+" ":"")+B.fontSize+"px "+B.fontFamily,(null!=(i=A.axis.domain.line.strokeWidth)?i:0)>0&&(e.lineWidth=Number(A.axis.domain.line.strokeWidth),e.lineCap="square",A.axis.domain.line.stroke&&(e.strokeStyle=A.axis.domain.line.stroke),e.beginPath(),e.moveTo(0,0),e.lineTo("x"===r?u:0,"x"===r?0:u),e.stroke());var X="function"==typeof p?p:function(e){return""+e};if(W.forEach((function(n){var i;(null!=(i=A.axis.ticks.line.strokeWidth)?i:0)>0&&(e.lineWidth=Number(A.axis.ticks.line.strokeWidth),e.lineCap="square",A.axis.ticks.line.stroke&&(e.strokeStyle=A.axis.ticks.line.stroke),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(n.x+n.lineX,n.y+n.lineY),e.stroke());var r=X(n.value);e.save(),e.translate(n.x+n.textX,n.y+n.textY),e.rotate(t.degreesToRadians(v)),B.outlineWidth>0&&(e.strokeStyle=B.outlineColor,e.lineWidth=2*B.outlineWidth,e.lineJoin="round",e.strokeText(""+r,0,0)),A.axis.ticks.text.fill&&(e.fillStyle=B.fill),e.fillText(""+r,0,0),e.restore()})),void 0!==b){var Y=0,q=0,z=0,R="center";"y"===r?(z=-90,Y=S,"start"===P?(R="start",q=u):"middle"===P?(R="center",q=u/2):"end"===P&&(R="end")):(q=S,"start"===P?R="start":"middle"===P?(R="center",Y=u/2):"end"===P&&(R="end",Y=u)),e.translate(Y,q),e.rotate(t.degreesToRadians(z)),e.font=(A.axis.legend.text.fontWeight?A.axis.legend.text.fontWeight+" ":"")+A.axis.legend.text.fontSize+"px "+A.axis.legend.text.fontFamily,A.axis.legend.text.fill&&(e.fillStyle=A.axis.legend.text.fill),e.textAlign=R,e.textBaseline="middle",e.fillText(b,0,0)}e.restore()};exports.Axes=p,exports.Axis=y,exports.AxisTick=m,exports.Grid=P,exports.GridLine=b,exports.GridLines=T,exports.NonMemoizedAxis=g,exports.axisPropType=k,exports.axisPropTypes=h,exports.positions=v,exports.renderAxesToCanvas=function(e,t){var n=t.xScale,i=t.yScale,r=t.width,a=t.height,o=t.top,s=t.right,l=t.bottom,c=t.left,x=t.theme,f={top:o,right:s,bottom:l,left:c};v.forEach((function(t){var o=f[t];if(!o)return null;var s="top"===t||"bottom"===t,l="top"===t||"left"===t?"before":"after",c=s?n:i,m=d(o.format,c);j(e,u({},o,{axis:s?"x":"y",x:"right"===t?r:0,y:"bottom"===t?a:0,scale:c,format:m,length:s?r:a,ticksPosition:l,theme:x}))}))},exports.renderAxisToCanvas=j,exports.renderGridLinesToCanvas=function(e,t){var n=t.width,i=t.height,r=t.scale,a=t.axis,o=t.values;f({width:n,height:i,scale:r,axis:a,values:o}).forEach((function(t){e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke()}))};
//# sourceMappingURL=nivo-axes.cjs.js.map
